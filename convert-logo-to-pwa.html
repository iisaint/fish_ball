<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logo è½‰ PWA åœ–ç¤ºå·¥å…·</title>
    <style>
        body {
            font-family: 'Microsoft JhengHei', 'Noto Sans TC', sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        h1 {
            color: #1e40af;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #64748b;
            margin-bottom: 30px;
        }
        .upload-section {
            background: #f8fafc;
            padding: 20px;
            border-radius: 10px;
            border: 2px dashed #cbd5e1;
            margin: 20px 0;
            text-align: center;
        }
        .preview-section {
            margin: 30px 0;
        }
        .preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .preview-item {
            background: #f8fafc;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e2e8f0;
        }
        .preview-item canvas {
            border: 2px solid #cbd5e1;
            border-radius: 8px;
            max-width: 100%;
            height: auto;
            margin: 10px 0;
            background: white;
        }
        .preview-item h3 {
            margin: 10px 0 5px 0;
            color: #334155;
            font-size: 16px;
        }
        .preview-item .size-info {
            color: #64748b;
            font-size: 12px;
            margin-bottom: 10px;
        }
        button {
            background: #1e40af;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: all 0.3s;
        }
        button:hover {
            background: #1e3a8a;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(30, 64, 175, 0.4);
        }
        button:disabled {
            background: #cbd5e1;
            cursor: not-allowed;
            transform: none;
        }
        .download-all {
            background: #059669;
            margin-top: 20px;
            padding: 14px 32px;
            font-size: 18px;
            font-weight: bold;
        }
        .download-all:hover {
            background: #047857;
        }
        .info-box {
            background: #eff6ff;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #1e40af;
        }
        .info-box strong {
            color: #1e40af;
        }
        .settings {
            background: #fef3c7;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #f59e0b;
        }
        .settings label {
            display: block;
            margin: 10px 0;
            color: #92400e;
        }
        .settings input[type="color"] {
            margin-left: 10px;
            cursor: pointer;
        }
        .settings input[type="range"] {
            width: 200px;
            margin-left: 10px;
        }
        #fileInput {
            display: none;
        }
        .upload-btn {
            background: #3b82f6;
            font-size: 16px;
            padding: 12px 32px;
        }
        .upload-btn:hover {
            background: #2563eb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŸ ä¸¸æ±é­šä¸¸ - Logo è½‰ PWA åœ–ç¤ºå·¥å…·</h1>
        <p class="subtitle">å°‡æ‚¨çš„ logo å¿«é€Ÿè½‰æ›ç‚º PWA éœ€è¦çš„å„ç¨®å°ºå¯¸åœ–ç¤º</p>

        <div class="info-box">
            <strong>âœ¨ åŠŸèƒ½èªªæ˜ï¼š</strong><br>
            1. ä¸Šå‚³æ‚¨çš„ logo åœ–ç‰‡ï¼ˆwan_dong_logo.jpgï¼‰<br>
            2. èª¿æ•´èƒŒæ™¯è‰²å’Œé‚Šè·<br>
            3. é è¦½æ‰€æœ‰å°ºå¯¸çš„åœ–ç¤º<br>
            4. ä¸€éµä¸‹è¼‰æ‰€æœ‰åœ–ç¤ºåˆ° public/icons/ è³‡æ–™å¤¾
        </div>

        <div class="upload-section">
            <h3>ğŸ“¤ ä¸Šå‚³ Logo</h3>
            <input type="file" id="fileInput" accept="image/*">
            <button class="upload-btn" onclick="document.getElementById('fileInput').click()">
                é¸æ“‡åœ–ç‰‡æª”æ¡ˆ
            </button>
            <p style="margin-top: 10px; color: #64748b; font-size: 14px;">
                æ”¯æ´ JPG, PNG, SVG æ ¼å¼
            </p>
        </div>

        <div class="settings" id="settings" style="display: none;">
            <h3>âš™ï¸ åœ–ç¤ºè¨­å®š</h3>
            <label>
                èƒŒæ™¯é¡è‰²:
                <input type="color" id="bgColor" value="#ffffff">
                <button onclick="setBgColor('#ffffff')" style="padding: 4px 8px; font-size: 12px;">ç™½è‰²</button>
                <button onclick="setBgColor('#1e40af')" style="padding: 4px 8px; font-size: 12px;">è—è‰²</button>
                <button onclick="setBgColor('#f0f9ff')" style="padding: 4px 8px; font-size: 12px;">æ·ºè—</button>
            </label>
            <label>
                Logo å¤§å°ï¼ˆé‚Šè·ï¼‰: <span id="paddingValue">20</span>%
                <input type="range" id="padding" min="0" max="40" value="20" 
                       oninput="document.getElementById('paddingValue').textContent = this.value; generateIcons()">
            </label>
            <label>
                <input type="checkbox" id="rounded" checked onchange="generateIcons()">
                åœ“è§’é‚Šæ¡†ï¼ˆPWA æ¨è–¦ï¼‰
            </label>
        </div>

        <div class="preview-section" id="previewSection" style="display: none;">
            <h2>ğŸ¨ é è¦½åœ–ç¤º</h2>
            <div class="preview-grid">
                <div class="preview-item">
                    <h3>App åœ–ç¤º (å°)</h3>
                    <div class="size-info">192 x 192 px</div>
                    <canvas id="canvas192" width="192" height="192"></canvas>
                    <button onclick="downloadIcon(192)">ä¸‹è¼‰ 192x192</button>
                </div>
                <div class="preview-item">
                    <h3>App åœ–ç¤º (å¤§)</h3>
                    <div class="size-info">512 x 512 px</div>
                    <canvas id="canvas512" width="512" height="512"></canvas>
                    <button onclick="downloadIcon(512)">ä¸‹è¼‰ 512x512</button>
                </div>
                <div class="preview-item">
                    <h3>Favicon</h3>
                    <div class="size-info">32 x 32 px</div>
                    <canvas id="canvas32" width="32" height="32"></canvas>
                    <button onclick="downloadFavicon()">ä¸‹è¼‰ Favicon</button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="download-all" onclick="downloadAll()">
                    ğŸ“¦ ä¸€éµä¸‹è¼‰æ‰€æœ‰åœ–ç¤º
                </button>
            </div>
        </div>

        <div class="info-box" id="instructionsBox" style="display: none;">
            <strong>ğŸ“ ä¸‹è¼‰å¾Œçš„æ­¥é©Ÿï¼š</strong><br>
            1. ç¢ºä¿å·²å»ºç«‹è³‡æ–™å¤¾ï¼š<code>mkdir -p public/icons</code><br>
            2. å°‡ä¸‹è¼‰çš„åœ–ç¤ºç§»å‹•åˆ°æ­£ç¢ºä½ç½®ï¼š<br>
            ã€€ â€¢ <code>icon-192x192.png</code> â†’ <code>public/icons/</code><br>
            ã€€ â€¢ <code>icon-512x512.png</code> â†’ <code>public/icons/</code><br>
            ã€€ â€¢ <code>favicon.ico</code> â†’ <code>public/</code><br>
            3. å®Œæˆï¼åŸ·è¡Œ <code>npm run build</code> æ¸¬è©¦
        </div>
    </div>

    <script>
        let sourceImage = null;

        // Load wan_dong_logo.jpg automatically
        window.addEventListener('load', () => {
            // Try to load the logo automatically
            const img = new Image();
            img.crossOrigin = "anonymous";
            img.onload = () => {
                sourceImage = img;
                document.getElementById('settings').style.display = 'block';
                document.getElementById('previewSection').style.display = 'block';
                document.getElementById('instructionsBox').style.display = 'block';
                generateIcons();
            };
            img.onerror = () => {
                console.log('Auto-load failed, user will need to upload manually');
            };
            img.src = 'wan_dong_logo.jpg';
        });

        document.getElementById('fileInput').addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (event) => {
                const img = new Image();
                img.onload = () => {
                    sourceImage = img;
                    document.getElementById('settings').style.display = 'block';
                    document.getElementById('previewSection').style.display = 'block';
                    document.getElementById('instructionsBox').style.display = 'block';
                    generateIcons();
                };
                img.src = event.target.result;
            };
            reader.readAsDataURL(file);
        });

        document.getElementById('bgColor').addEventListener('change', generateIcons);

        function setBgColor(color) {
            document.getElementById('bgColor').value = color;
            generateIcons();
        }

        function generateIcons() {
            if (!sourceImage) return;

            [32, 192, 512].forEach(size => {
                const canvas = document.getElementById(`canvas${size}`);
                const ctx = canvas.getContext('2d');
                
                const bgColor = document.getElementById('bgColor').value;
                const padding = parseInt(document.getElementById('padding').value);
                const rounded = document.getElementById('rounded').checked;

                // Clear canvas
                ctx.clearRect(0, 0, size, size);

                // Draw background
                ctx.fillStyle = bgColor;
                if (rounded) {
                    const radius = size * 0.15;
                    ctx.beginPath();
                    ctx.roundRect(0, 0, size, size, radius);
                    ctx.fill();
                } else {
                    ctx.fillRect(0, 0, size, size);
                }

                // Calculate logo size with padding
                const paddingPx = size * (padding / 100);
                const logoSize = size - (paddingPx * 2);

                // Calculate position to center logo
                const x = paddingPx;
                const y = paddingPx;

                // Draw logo (contain fit)
                const imgAspect = sourceImage.width / sourceImage.height;
                let drawWidth = logoSize;
                let drawHeight = logoSize;
                let drawX = x;
                let drawY = y;

                if (imgAspect > 1) {
                    drawHeight = logoSize / imgAspect;
                    drawY = y + (logoSize - drawHeight) / 2;
                } else {
                    drawWidth = logoSize * imgAspect;
                    drawX = x + (logoSize - drawWidth) / 2;
                }

                ctx.drawImage(sourceImage, drawX, drawY, drawWidth, drawHeight);
            });
        }

        function downloadIcon(size) {
            const canvas = document.getElementById(`canvas${size}`);
            const link = document.createElement('a');
            link.download = `icon-${size}x${size}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        function downloadFavicon() {
            const canvas = document.getElementById('canvas32');
            const link = document.createElement('a');
            link.download = 'favicon.ico';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        function downloadAll() {
            setTimeout(() => downloadIcon(192), 100);
            setTimeout(() => downloadIcon(512), 300);
            setTimeout(() => downloadFavicon(), 500);
            
            setTimeout(() => {
                alert('âœ… æ‰€æœ‰åœ–ç¤ºå·²ä¸‹è¼‰å®Œæˆï¼\n\nè«‹å°‡æª”æ¡ˆç§»å‹•åˆ°ï¼š\nâ€¢ icon-192x192.png â†’ public/icons/\nâ€¢ icon-512x512.png â†’ public/icons/\nâ€¢ favicon.ico â†’ public/');
            }, 700);
        }
    </script>
</body>
</html>

